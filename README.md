

é«˜æ€§èƒ½é€šç”¨é€šè®¯æœåŠ¡ï¼Œæ”¯æŒå³æ—¶é€šè®¯ï¼Œç«™å†…/ç³»ç»Ÿæ¶ˆæ¯ï¼Œæ¶ˆæ¯ä¸­å°ï¼Œç‰©è”ç½‘é€šè®¯ï¼ŒéŸ³è§†é¢‘ä¿¡ä»¤ï¼Œç›´æ’­å¼¹å¹•ï¼Œå®¢æœç³»ç»Ÿï¼ŒAIé€šè®¯ï¼Œå³æ—¶ç¤¾åŒºç­‰åœºæ™¯ã€‚

`æœ¬é¡¹ç›®éœ€è¦åœ¨go1.20.0æˆ–ä»¥ä¸Šç¯å¢ƒç¼–è¯‘`



åˆ†å¸ƒå¼IMé‡è¦ç‰¹æ€§ï¼šÂ æ•…éšœè‡ªåŠ¨è½¬ç§»ï¼Œå»ä¸­å¿ƒåŒ–è®¾è®¡ï¼ŒèŠ‚ç‚¹ä¹‹é—´æ•°æ®äº’å¤‡ï¼Œæ”¯æŒé›†ç¾¤å¿«é€Ÿè‡ªåŠ¨æ‰©å®¹ï¼Œä»£ç†èŠ‚ç‚¹æœºåˆ¶


![](http://localhost:63342/markdownPreview/713228306/docs/logo.png?_ijt=jplti0t3trcq6irctv35vaufb0)

- **å®˜ç½‘**: https://githubim.com
- **é€šè®¯åè®®**:Â [WuKongIMåè®®](https://githubim.com/guide/proto.html)
- **æé—®**: https://github.com/WuKongIM/WuKongIM/issues
- **æ–‡æ¡£**: https://githubim.com

[![](https://img.shields.io/github/license/WuKongIM/WuKongIM?color=yellow&style=flat-square)](file:///D:/github/IM/LICENSE)Â [![](https://img.shields.io/badge/go-%3E%3D1.20-30dff3?style=flat-square&logo=go)](https://github.com/WuKongIM/WuKongIM)Â [![](https://img.shields.io/badge/go%20report-A+-brightgreen.svg?style=flat)](https://goreportcard.com/report/github.com/WuKongIM/WuKongIM)Â [![](https://img.shields.io/badge/Slack-99%2B-blueviolet?logo=slack&logoColor=white)](https://join.slack.com/t/wukongim/shared_invite/zt-22o7we8on-2iKNUmgigB9ERdF9XUivmw)

## æ¶æ„å›¾

![](http://localhost:63342/markdownPreview/713228306/docs/architecture/cluster.png?_ijt=jplti0t3trcq6irctv35vaufb0)

## èŠ‚ç‚¹æ•…éšœè½¬ç§»æ¼”ç¤º

![](http://localhost:63342/markdownPreview/713228306/docs/architecture/cluster-failover.webp?_ijt=jplti0t3trcq6irctv35vaufb0)

## æ¼”ç¤º

**èŠå¤©Demo**

webèŠå¤©åœºæ™¯æ¼”ç¤ºï¼šÂ [http://imdemo.githubim.com](http://imdemo.githubim.com/)

åç«¯ç›‘æ§æ¼”ç¤ºï¼šÂ [http://monitor.githubim.com/web](http://monitor.githubim.com/web)


## ç‰¹ç‚¹

ğŸ¦**ç‹¬ç‰¹æ€§**

ç¾¤æˆå‘˜æ— ä¸Šé™ï¼Œè½»æ¾æ”¯æŒ10ä¸‡äººç¾¤èŠï¼Œæ¶ˆæ¯å¯æ°¸ä¹…å­˜å‚¨ã€‚

ğŸ“š**èµ„æºæ¶ˆè€—ä½**

è‡ªç ”äºŒè¿›åˆ¶åè®®ï¼Œå¿ƒè·³åŒ…åªæœ‰1å­—èŠ‚ï¼Œçœæµé‡ï¼Œçœç”µé‡ï¼Œä¼ è¾“æ›´è¿…é€Ÿã€‚

ğŸ”**å®‰å…¨æ€§**

æ¶ˆæ¯é€šé“å’Œæ¶ˆæ¯å†…å®¹å…¨ç¨‹åŠ å¯†ï¼Œé˜²ä¸­é—´äººæ”»å‡»å’Œçªœæ”¹æ¶ˆæ¯å†…å®¹ï¼ŒæœåŠ¡ç«¯æ•°æ®å®æ—¶å¤‡ä»½ï¼Œæ•°æ®ä¸ä¸¢å¤±ã€‚

ğŸš€Â **æ€§èƒ½**

åŸºäºpebble kvæ•°æ®åº“ï¼Œç ”å‘äº†é’ˆå¯¹äºIMè¿™ç§æœåŠ¡çš„ç‰¹æœ‰åˆ†å¸ƒå¼æ•°æ®åº“ï¼Œçœäº†å…¶ä»–æ•°æ®åº“ä¸ºäº†é€šç”¨æ€§è€Œå¸¦æ¥çš„æ€§èƒ½æŸè€—ï¼Œ å› ä¸ºå­˜å‚¨å¿«ï¼Œæ‰€ä»¥æ¶ˆæ¯å¿«ã€‚

ğŸ”¥**é«˜å¯ç”¨**

é€šè¿‡é­”æ”¹raftåˆ†å¸ƒå¼åè®®ï¼Œå®ç°äº†è‡ªåŠ¨å®¹ç¾ï¼Œä¸€å°æœºå™¨å®•æœºï¼Œå¦ä¸€å°æœºå™¨è‡ªåŠ¨æ¥ç®¡ï¼Œå¯¹å¤–æ— æ„ŸçŸ¥ã€‚

å»ä¸­å¿ƒåŒ–ï¼Œæ— å•ç‚¹ï¼Œæ— ä¸­å¿ƒèŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ç‹¬ç«‹ä¸”å¹³ç­‰çš„ï¼Œéƒ½å¯ä»¥æä¾›æœåŠ¡ã€‚

æ‰©å®¹æ–¹ä¾¿ï¼Œåªéœ€å¢åŠ æœºå™¨ï¼Œä¸éœ€è¦åœæœºï¼Œä¸éœ€è¦è¿ç§»æ•°æ®ï¼Œè‡ªåŠ¨æŒ‰ç­–ç•¥åˆ†é…æ•°æ®ã€‚

## åŠŸèƒ½ç‰¹æ€§

- [x] æ”¯æŒè‡ªå®šä¹‰æ¶ˆæ¯
- [x] æ”¯æŒè®¢é˜…/å‘å¸ƒè€…æ¨¡å¼
- [x] æ”¯æŒä¸ªäºº/ç¾¤èŠ/å®¢æœ/ç¤¾åŒºèµ„è®¯é¢‘é“
- [x] æ”¯æŒé¢‘é“é»‘æ˜å•
- [x] æ”¯æŒé¢‘é“ç™½åå•
- [x] æ”¯æŒæ¶ˆæ¯æ°¸ä¹…æ¼«æ¸¸ï¼Œæ¢è®¾å¤‡ç™»å½•ï¼Œæ¶ˆæ¯ä¸ä¸¢å¤±
- [x] æ”¯æŒåœ¨çº¿çŠ¶æ€ï¼Œæ”¯æŒåŒè´¦å·å¤šè®¾å¤‡åŒæ—¶åœ¨çº¿
- [x] æ”¯æŒå¤šè®¾å¤‡æ¶ˆæ¯å®æ—¶åŒæ­¥
- [x] æ”¯æŒç”¨æˆ·æœ€è¿‘ä¼šè¯åˆ—è¡¨æœåŠ¡ç«¯ç»´æŠ¤
- [x] æ”¯æŒæŒ‡ä»¤æ¶ˆæ¯
- [x] æ”¯æŒç¦»çº¿æŒ‡ä»¤æ¥å£
- [x] æ”¯æŒWebhookï¼Œè½»æ¾å¯¹æ¥è‡ªå·±çš„ä¸šåŠ¡ç³»ç»Ÿ
- [x] æ”¯æŒDatasourceï¼Œæ— ç¼å¯¹æ¥è‡ªå·±çš„ä¸šåŠ¡ç³»ç»Ÿæ•°æ®æº
- [x] æ”¯æŒWebsocketè¿æ¥
- [x] æ”¯æŒTLS 1.3
- [x] æ”¯æŒPrometheusç›‘æ§
- [x] ç›‘æ§ç³»ç»Ÿå¼€å‘
- [x] æ”¯æŒWindowsç³»ç»Ÿ(ä»…å¼€å‘ç”¨)
- [x] æ”¯æŒæµå¼æ¶ˆæ¯ï¼Œç±»ä¼¼chatgptçš„ç»“æœè¾“å‡ºæµ
- [x] æ”¯æŒåˆ†å¸ƒå¼
  - [x] å»ä¸­å¿ƒåŒ–è®¾è®¡ï¼Œä»»æ„ä¸€ä¸ªèŠ‚ç‚¹å®•æœºï¼Œé›†ç¾¤è‡ªåŠ¨ä¿®å¤
  - [x] é›†ç¾¤èŠ‚ç‚¹ä¹‹é—´æ•°æ®äº’å¤‡ï¼Œä»»æ„ä¸€ä¸ªèŠ‚ç‚¹æŸå®³ï¼Œä¸å½±å“æ•°æ®å®Œæ•´æ€§
  - [x] æ”¯æŒé›†ç¾¤å¿«é€Ÿè‡ªåŠ¨æ‰©å®¹
  - [ ] æ”¯æŒé•¿è¿æ¥CDNï¼Œè§£å†³è·¨å›½è·¨åœ°åŒºé•¿è¿æ¥ä¸ç¨³å®šé—®é¢˜

## å¿«é€Ÿè¿è¡Œ

### Dockeréƒ¨ç½²ï¼ˆå•æœºï¼‰
```shell
docker run -d -p 15001:5001 -p 15100:5100 -p 15172:5172 -p 15200:5200 -p 15210:5210 -p 15300:5300  --name wukongim -v ./wukongim:/root/wukongim  wukongim/wukongim:v2.0.0-beta-20240428
```

### Dockeréƒ¨ç½²ï¼ˆåˆ†å¸ƒå¼ï¼‰
```shell
git clone https://github.com/WuKongIM/WuKongIM.git

cd ./WuKongIM/docker/cluster

sudo docker compose up -d
```

## æºç å¼€å‘

### å•æœº

```shell
go run main.go

(æˆ– go run main.go --config config/wk.yaml)

```

### åˆ†å¸ƒå¼

```yaml
# å¯åŠ¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹
go run main.go --config  ./exampleconfig/cluster1.yaml

# å¯åŠ¨ç¬¬äºŒä¸ªèŠ‚ç‚¹
go run main.go --config  ./exampleconfig/cluster2.yaml

# å¯åŠ¨ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹
go run main.go --config  ./exampleconfig/cluster3.yaml

```

### è®¿é—®

æŸ¥è¯¢ç³»ç»Ÿä¿¡æ¯:Â [http://127.0.0.1:15001/varz](http://127.0.0.1:15001/varz)

æŸ¥çœ‹ç›‘æ§ä¿¡æ¯ï¼šÂ [http://127.0.0.1:15300/web](http://127.0.0.1:15300/web)

å®¢æˆ·ç«¯æ¼”ç¤ºåœ°å€ï¼š[http://127.0.0.1:15172/chatdemo](http://127.0.0.1:15172/chatdemo)Â (åˆ†å¸ƒå¼åœ°å€ä¸ºï¼š[http://127.0.0.1:15172/login](http://127.0.0.1:15172/login))

ç«¯å£è§£é‡Š:

`15001: apiç«¯å£ 15100: tcpé•¿è¿æ¥ç«¯å£ 15172: demoç«¯å£ 15200: websocketé•¿è¿æ¥ç«¯å£ 15300: ç›‘æ§ç³»ç»Ÿç«¯å£`



## å›¾è§£

æ€»ä½“æ¶æ„å›¾


![](http://localhost:63342/markdownPreview/713228306/docs/architecture/architecture2.png?_ijt=jplti0t3trcq6irctv35vaufb0)

ä¸šåŠ¡ç³»ç»Ÿå¯¹æ¥

![[Pasted image 20240731070930.png]]

Webhookå¯¹æ¥å›¾

![image](http://localhost:63342/markdownPreview/713228306/docs/webhook.png?_ijt=jplti0t3trcq6irctv35vaufb0)

## é€‚ç”¨åœºæ™¯

#### å³æ—¶é€šè®¯

- ç¾¤é¢‘é“æ”¯æŒ
- ä¸ªäººé¢‘é“æ”¯æŒ
- æ¶ˆæ¯æ°¸ä¹…å­˜å‚¨
- ç¦»çº¿æ¶ˆæ¯æ¨é€æ”¯æŒ
- æœ€è¿‘ä¼šè¯ç»´æŠ¤

#### æ¶ˆæ¯æ¨é€/ç«™å†…æ¶ˆæ¯

- ç¾¤é¢‘é“æ”¯æŒ
- ä¸ªäººé¢‘é“æ”¯æŒ
- ç¦»çº¿æ¶ˆæ¯æ¨é€æ”¯æŒ

#### ç‰©è”ç½‘é€šè®¯

- mqttåè®®æ”¯æŒï¼ˆå¾…å¼€å‘ï¼‰
- æ”¯æŒå‘å¸ƒä¸è®¢é˜…

#### éŸ³è§†é¢‘ä¿¡ä»¤æœåŠ¡å™¨

- æ”¯æŒä¸´æ—¶æŒ‡ä»¤æ¶ˆæ¯æŠ•é€’

#### ç›´æ’­å¼¹å¹•

- ä¸´æ—¶æ¶ˆæ¯æŠ•é€’

- ä¸´æ—¶è®¢é˜…è€…æ”¯æŒ


#### å®¢æœç³»ç»Ÿ

- å®¢æœé¢‘é“æ”¯æŒ

- æ¶ˆæ¯æ”¯æŒæŠ•é€’ç»™ç¬¬ä¸‰æ–¹æœåŠ¡å™¨

- ç¬¬ä¸‰æ–¹æœåŠ¡å™¨å¯å†³å®šåˆ†é…æŒ‡å®šçš„è®¢é˜…è€…æˆç»„æŠ•é€’


#### å®æ—¶AIåé¦ˆ

- æ”¯æŒå®¢æˆ·ç«¯å‘çš„æ¶ˆæ¯æ¨é€ç»™ç¬¬ä¸‰æ–¹æœåŠ¡å™¨ï¼Œç¬¬ä¸‰æ–¹æœåŠ¡å™¨åé¦ˆç»™AIåè¿”å›çš„ç»“æœå†æ¨é€ç»™å®¢æˆ·ç«¯

#### å³æ—¶ç¤¾åŒº

- ç¤¾åŒºé¢‘é“æ”¯æŒ
- æ”¯æŒtopicæ¨¡å¼çš„æ¶ˆæ¯æŠ•é€’

## ç›‘æ§æˆªå›¾

![image](http://localhost:63342/markdownPreview/713228306/docs/screen1.png?_ijt=jplti0t3trcq6irctv35vaufb0)Â ![image](http://localhost:63342/markdownPreview/713228306/docs/screen2.png?_ijt=jplti0t3trcq6irctv35vaufb0)Â ![image](http://localhost:63342/markdownPreview/713228306/docs/screen3.png?_ijt=jplti0t3trcq6irctv35vaufb0)Â ![image](http://localhost:63342/markdownPreview/713228306/docs/screen4.png?_ijt=jplti0t3trcq6irctv35vaufb0)Â ![image](http://localhost:63342/markdownPreview/713228306/docs/screen5.png?_ijt=jplti0t3trcq6irctv35vaufb0)

## Star

æˆ‘ä»¬å›¢é˜Ÿä¸€ç›´è‡´åŠ›äºå³æ—¶é€šè®¯çš„ç ”å‘ï¼Œéœ€è¦æ‚¨çš„é¼“åŠ±ï¼Œå¦‚æœæ‚¨è§‰å¾—æœ¬é¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹ä¸ªstarï¼Œæ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä»¬æœ€å¤§çš„åŠ¨åŠ›ã€‚

## æ¡ˆä¾‹å±•ç¤º

**é¡¹ç›®å**

TangSengDaoDao

**å¼€æºåœ°å€**

[https://github.com/TangSengDaoDao/TangSengDaoDaoServer](https://github.com/TangSengDaoDao/TangSengDaoDaoServer)

**æˆªå›¾**


|![](http://localhost:63342/markdownPreview/713228306/docs/case/tsdaodao/screenshot/conversationlist.webp?_ijt=jplti0t3trcq6irctv35vaufb0)|![](http://localhost:63342/markdownPreview/713228306/docs/case/tsdaodao/screenshot/messages.webp?_ijt=jplti0t3trcq6irctv35vaufb0)|![](http://localhost:63342/markdownPreview/713228306/docs/case/tsdaodao/screenshot/robot.webp?_ijt=jplti0t3trcq6irctv35vaufb0)|



![](http://localhost:63342/markdownPreview/713228306/docs/case/tsdaodao/screenshot/pc11.png?_ijt=jplti0t3trcq6irctv35vaufb0)
